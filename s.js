(({contextMenus:m,omnibox:o,runtime:r,tabs:t})=>{let f=async(a,b)=>navigator.onLine&&((f=typeof a=="object")?(b=a.menuItemId,a=a.selectionText):(b=3-d.indexOf(a.slice(m=a.lastIndexOf("-")-1)))<4&&(a=a.slice(0,m)),t[f?"create":"update"]({url:b<4?(a=a.trim().replaceAll(" ","+"),b>2||b<1?(await fetch((b=b>2?"https://www.pedigreequery.com/":"https://www.allbreedpedigree.com/")+a+"2",{method:"HEAD"})).status<201?b+"index.php?query_type=check&search_bar=horse&h="+a+"&g=5&inbred=Standard":b+a:(b>"1"?"https://www.jbis.or.jp/horse/result/?sid=horse&keyword=":"https://sporthorse-data.com/search/pedigree?keys=")+a):(()=>{for(m="https://db.netkeiba.com/?pid=horse_list&word=",f=0;m+=(b=a[f])<"{"?b:b>"゠"&&b<"ヷ"?"%a5%"+(b.charCodeAt()-12288).toString(16):b==" "?"+":b=="ー"?"%a1%bc":b=="の"?"%a4%ce":b=="Ⅱ"?"II":"",++f<a.length;);return m})()})),d=[" - pedigreequery"," - jbis"," - sporthorse"," - allpedigree"],{onInputChanged:x,onInputEntered:y,setDefaultSuggestion:z}=o;x.addListener((t,s)=>(z({description:t+" - netkeiba"}),s(d.map(v=>({content:f=t+v,description:f}))))),y.addListener(f),m.onClicked.addListener(f),r.onInstalled.addListener(()=>{for(f=5;m.create({id:--f+"",title:["allpedigree","sporthorse","jbis","pedigreequery","netkeiba"][f],contexts:["selection"]}),f;);})})(chrome)